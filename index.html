<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-G5ZL8VZKZK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-G5ZL8VZKZK');
    </script>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "v2pz0twgbf");
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="주식 물타기 계산기(Stock Averaging Calculator)로 평단가를 낮추는 데 필요한 주식 수를 계산하세요. 목표 평단가 역계산, 미국 주식 환율 자동 적용, 포트폴리오 비중 분석 기능을 제공합니다.">
    <meta name="keywords" content="물타기 계산기, 주식 평단가 계산기, 주식 물타기, 평단가 수정, 미국주식 환율, 스톡 캘큘레이터, 주식 수익률 계산, DCA 계산기">
    <meta name="author" content="Stock Pro">
    <meta name="google-site-verification" content="L_l56888_prTpuO_oSCrZ-d7t6E1VAHt_JArm0InAp8" />
    <meta name="naver-site-verification" content="fdac7763e723daac7569f681fab0364341686f64" />
    
    <!-- GEO & SEO: Structured Data for Generative AI -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "SoftwareApplication",
          "name": "Stock Pro 물타기 계산기",
          "applicationCategory": "FinanceApplication",
          "operatingSystem": "Web",
          "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "KRW"
          },
          "description": "주식 추가 매수(물타기) 시 변화하는 평균 단가를 계산하고, 목표 평단가를 맞추기 위해 필요한 주식 수를 역으로 산출해주는 도구입니다.",
          "featureList": [
            "주식 평단가 계산 (DCA)",
            "목표 평단가 역계산",
            "미국 주식 실시간 환율 적용",
            "포트폴리오 비중 시각화",
            "계산 결과 이미지 저장"
          ]
        },
        {
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "물타기(DCA)란 무엇인가요?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "주가가 하락했을 때 추가 매수를 통해 평균 단가를 낮추는 투자 전략입니다. 이를 통해 향후 주가가 반등할 때 손실을 더 빠르게 만회하고, 수익 전환 시점을 앞당길 수 있습니다."
              }
            },
            {
              "@type": "Question",
              "name": "목표 평단가 계산은 어떻게 하나요?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Stock Pro 계산기의 '목표 평단 역계산' 기능을 사용하세요. 원하는 목표 평단가와 매수 희망가를 입력하면, 목표를 달성하기 위해 몇 주를 추가로 매수해야 하는지 자동으로 계산해줍니다."
              }
            },
            {
              "@type": "Question",
              "name": "미국 주식 물타기 계산 시 환율은 어떻게 적용되나요?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "본 계산기는 실시간 환율 정보를 자동으로 불러와 적용합니다. 또한 '최초 매수 시 환율'을 입력하여 환차손익까지 고려한 정확한 원화 투자 규모를 파악할 수 있습니다."
              }
            }
          ]
        }
      ]
    }
    </script>
    <title>Stock Pro - 주식 물타기 계산기 & 목표 평단 분석</title>
    <link rel="canonical" href="https://teraz.pages.dev/">
    <link rel="icon" href="images/favicon.svg" type="image/svg+xml">

    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="Stock Pro - 주식 물타기 계산기">
    <meta property="og:description" content="미국/한국 주식 평단가 계산 및 목표 평단 역계산기. 스마트한 물타기 전략을 세워보세요.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teraz.pages.dev/">
    <meta property="og:site_name" content="Stock Pro">
    <meta property="og:locale" content="ko_KR">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Stock Pro - 주식 물타기 계산기">
    <meta name="twitter:description" content="미국/한국 주식 평단가 계산 및 목표 평단 역계산기.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.6.6/css/flag-icons.min.css"/>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7507549082424652"
     crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="background-overlay"></div>
    
    <header class="header">
        <div class="header-content">
            <h1 class="logo">
                <i class="fas fa-chart-pie"></i>
                STOCK PRO
            </h1>
            <div class="header-right-group">
                <h2 class="main-title" data-i18n="mainTitle">주식 물타기 & 목표 평단 계산기</h2>
                <button id="lang-toggle" class="lang-btn" title="Switch Language">
                    <span class="lang-text">EN</span>
                    <i class="fas fa-globe"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="main-container">
        <!-- Hero Section (Web Intuition) -->
        <div class="hero-section">
            <h2 class="hero-title">스마트한 투자자를 위한 <span class="highlight-text">물타기 계산기</span></h2>
            <p class="hero-desc">평단가를 얼마나 낮출 수 있을까요? 목표 평단 역계산과 포트폴리오 분석으로 탈출 계획을 세워보세요.</p>
        </div>

        <!-- 기존 계산기 영역 -->
        <div class="calculator-wrapper">
            <!-- Settings Bar -->
            <div class="settings-bar">
                <!-- TradingView Ticker Tape Widget -->
                <div class="tradingview-widget-container" style="width: 100%; margin-bottom: 1rem;">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
                    {
                    "symbols": [
                        { "proName": "FOREXCOM:SPX500", "title": "S&P 500" },
                        { "proName": "FOREXCOM:NSXUSD", "title": "Nasdaq 100" },
                        { "proName": "FX_IDC:USDKRW", "title": "USD/KRW" },
                        { "proName": "AMEX:EWY", "title": "한국증시(EWY)" },
                        { "proName": "TVC:GOLD", "title": "국제 금시세" }
                    ],
                    "showSymbolLogo": true,
                    "colorTheme": "dark",
                    "isTransparent": true,
                    "displayMode": "adaptive",
                    "locale": "kr"
                    }
                    </script>
                </div>

                <!-- Hidden inputs to maintain JS compatibility -->
                <div class="input-item stock-name-input" style="display: none;">
                    <i class="fas fa-tag"></i>
                    <input type="text" id="stock-name" placeholder="종목명 (선택사항, 예: TSLA)">
                </div>
                <div class="toggle-item" style="display: none;">
                    <label class="toggle-switch">
                        <input type="checkbox" id="include-fees">
                        <span class="slider"></span>
                    </label>
                    <span class="toggle-label">수수료 포함 (0.25%)</span>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" data-tab="us-stock">
                    <span class="fi fi-us"></span>
                    <span data-i18n="tabUS">미국주식 ($)</span>
                </button>
                <button class="tab-btn" data-tab="kr-stock">
                    <span class="fi fi-kr"></span>
                    <span data-i18n="tabKR">한국주식 (₩)</span>
                </button>
            </div>

            <!-- 계산기 입력 폼 (공통 사용, 통화 기호만 변경) -->
            <div class="calculator-section">
                
                <div class="input-grid">
                    <!-- 보유 주식 섹션 -->
                    <div class="section-group">
                        <h3><i class="fas fa-wallet"></i> <span data-i18n="secCurrent">현재 보유 자산</span></h3>
                        <div class="input-group">
                            <label data-i18n="lblShares">보유 수량</label>
                            <input type="number" id="current-shares" placeholder="0" step="1">
                        </div>
                        <div class="input-group">
                            <label data-i18n="lblAvgPrice">평균 단가</label>
                            <input type="number" id="current-price" placeholder="0" step="0.01">
                        </div>
                        <div class="input-group">
                            <label data-i18n="lblMarketPrice">현재 시장가</label>
                            <input type="number" id="market-price" placeholder="0" step="0.01">
                        </div>
                    </div>

                    <!-- 추가 매수 섹션 -->
                    <div class="section-group">
                        <h3><i class="fas fa-cart-plus"></i> <span data-i18n="secAdd">추가 매수 계획</span></h3>
                        
                        <!-- 탭형 서브 메뉴: 직접 입력 vs 역계산 -->
                        <div class="calc-mode-tabs">
                            <button class="mode-btn active" onclick="setCalcMode('manual')" data-i18n="modeManual">수량 직접 입력</button>
                            <button class="mode-btn" onclick="setCalcMode('target')" data-i18n="modeTarget">목표 평단 역계산</button>
                        </div>

                        <div id="mode-manual" class="mode-content active">
                            <div class="input-group">
                                <label data-i18n="lblAddShares">추가 매수 수량</label>
                                <input type="number" id="additional-shares" placeholder="0" step="1">
                            </div>
                            <div class="input-group">
                                <label data-i18n="lblBuyPrice">매수 희망가</label>
                                <input type="number" id="additional-price" placeholder="0" step="0.01">
                                <div class="quick-price-buttons">
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('additional-price', 0)" data-i18n="btnCurrent">현재가</button>
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('additional-price', -0.05)">-5%</button>
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('additional-price', -0.10)">-10%</button>
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('additional-price', -0.20)">-20%</button>
                                </div>
                            </div>
                        </div>

                        <div id="mode-target" class="mode-content">
                            <div class="input-group highlight">
                                <label data-i18n="lblTargetAvg">목표 평균 단가</label>
                                <input type="number" id="target-avg-price" placeholder="희망하는 평단가 입력" step="0.01">
                            </div>
                            <div class="input-group">
                                <label data-i18n="lblTargetBuy">매수 희망가 (선택)</label>
                                <input type="number" id="target-buy-price" placeholder="미입력 시 현재 시가 적용" step="0.01">
                                <div class="quick-price-buttons">
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('target-buy-price', 0)" data-i18n="btnCurrent">현재가</button>
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('target-buy-price', -0.05)">-5%</button>
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('target-buy-price', -0.10)">-10%</button>
                                    <button type="button" class="q-btn" onclick="applyQuickPrice('target-buy-price', -0.20)">-20%</button>
                                </div>
                            </div>
                            <p class="help-text" data-i18n="helpTarget">목표 평단을 맞추기 위해 필요한 주식 수를 계산합니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 고급 옵션 (환율 등) -->
                <div class="advanced-options">
                    <div class="input-group" id="orig-rate-group" style="display: none;">
                        <label data-i18n="lblOrigRate">최초 매수 시 환율 (선택: 환차손익 계산용)</label>
                        <input type="number" id="original-exchange-rate" placeholder="미입력시 현재 환율 적용">
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="reset-btn" onclick="resetCalculator()">
                        <i class="fas fa-undo"></i> <span data-i18n="btnReset">초기화</span>
                    </button>
                    <button class="calculate-btn" onclick="calculate()">
                        <i class="fas fa-calculator"></i> <span data-i18n="btnCalc">분석 실행</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 결과 대시보드 -->
        <div class="results-section" id="results" style="display: none;">
            <div class="results-toolbar">
                <h2><i class="fas fa-poll"></i> <span data-i18n="resTitle">투자 분석 리포트</span></h2>
                <button class="save-btn" onclick="saveAsImage()">
                    <i class="fas fa-download"></i> <span data-i18n="btnSave">이미지 저장</span>
                </button>
            </div>

            <div id="capture-area" class="capture-container">
                <!-- 0. 목표 달성 가이드 (역계산 시 노출) -->
                <div class="target-action-card" id="res-target-action" style="display: none;">
                    <div class="action-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="action-info">
                        <p class="action-label" data-i18n="resPlanLabel">목표 달성 실행 계획</p>
                        <h2 class="action-title" id="action-title-text">
                            <!-- Dynamic Content -->
                        </h2>
                    </div>
                </div>

                <!-- 1. 핵심 요약 카드 -->
                <div class="insight-banner">
                    <div class="insight-item">
                        <span class="insight-label" data-i18n="resAvgChange">평단가 변화</span>
                        <div class="insight-value-group">
                            <span class="old-value" id="res-old-avg">-</span>
                            <i class="fas fa-arrow-right"></i>
                            <span class="new-value" id="res-new-avg">-</span>
                        </div>
                        <span class="insight-change badge" id="res-avg-change">-</span>
                    </div>
                    <div class="insight-item">
                        <span class="insight-label" data-i18n="resReqCost">필요 투자금</span>
                        <span class="main-value" id="res-required-cost">-</span>
                        <span class="sub-value" id="res-required-cost-krw" style="display:none">-</span>
                    </div>
                </div>

                <!-- 2. 차트 영역 -->
                <div class="charts-container">
                    <div class="chart-box">
                        <h4 data-i18n="chartWeight"><i class="fas fa-chart-pie"></i> 포트폴리오 비중</h4>
                        <div class="chart-wrapper">
                            <canvas id="weightChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-box">
                        <h4 data-i18n="chartPosition"><i class="fas fa-ruler-vertical"></i> 평단가 위치 분석</h4>
                        <div class="chart-wrapper">
                            <canvas id="positionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 3. 상세 데이터 그리드 -->
                <div class="data-grid">
                    <div class="data-card">
                        <div class="card-header" data-i18n="cardEffect">📊 물타기 효과</div>
                        <div class="row">
                            <span data-i18n="rowTotalShares">총 보유 수량</span>
                            <strong id="res-total-shares">-</strong>
                        </div>
                        <div class="row">
                            <span data-i18n="rowTotalInvest">총 투자 원금</span>
                            <strong id="res-total-invest">-</strong>
                        </div>
                        <div class="row" id="row-krw-total" style="display:none">
                            <span data-i18n="rowTotalKRW">원화 환산 총액</span>
                            <strong id="res-total-invest-krw">-</strong>
                        </div>
                    </div>

                    <div class="data-card">
                        <div class="card-header" data-i18n="cardRisk">🛡 리스크 & 목표</div>
                        <div class="row">
                            <span data-i18n="rowCurReturn">현재 손익률</span>
                            <strong id="res-current-return">-</strong>
                        </div>
                        <div class="row">
                            <span data-i18n="rowNewReturn">예상 손익률 (물타기 후)</span>
                            <strong id="res-new-return">-</strong>
                        </div>
                        <div class="row">
                            <span data-i18n="rowRecovery">원금 회복까지</span>
                            <strong id="res-recovery-rate" class="highlight">-</strong>
                        </div>
                    </div>
                </div>

                <!-- 4. 시나리오 -->
                <div class="scenario-box">
                    <h4 data-i18n="scenTitle">💡 수익 시나리오</h4>
                    <p id="scenario-text">...</p>
                </div>
                
                <div class="watermark">Stock Pro Calculator</div>
            </div>

            <!-- Viral Share Section -->
            <div class="share-container">
                <p class="share-title" data-i18n="shareTitle">이 계산기가 유용했다면 공유해보세요!</p>
                <div class="share-buttons">
                    <!-- Native Share (Mobile) -->
                    <button class="share-icon-btn native-share" onclick="shareNative()" title="Share">
                        <i class="fas fa-share-nodes"></i>
                    </button>
                    <!-- Desktop/Fallback -->
                    <button class="share-icon-btn x-share" onclick="shareToX()" title="Share on X">
                        <i class="fa-brands fa-twitter"></i>
                    </button>
                    <button class="share-icon-btn fb-share" onclick="shareToFB()" title="Share on Facebook">
                        <i class="fa-brands fa-facebook-f"></i>
                    </button>
                    <button class="share-icon-btn link-share" onclick="copyLink()" title="Copy Link">
                        <i class="fas fa-link"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- SEO 및 콘텐츠 가이드 섹션 (애드센스 최적화) -->
        <section class="content-guide-section">
            <article class="guide-article">
                <h2 data-i18n="guideTitle">📈 주식 물타기 계산기 100% 활용 가이드</h2>
                <p data-i18n="guideIntro">
                    성공적인 투자를 위해서는 체계적인 자금 관리와 전략적인 분할 매수가 필수적입니다. 
                    <strong>Stock Pro 물타기 계산기</strong>는 단순한 수치 계산을 넘어, 투자자가 합리적인 의사결정을 내릴 수 있도록 돕는 전문 분석 도구입니다.
                </p>
                
                <h3 data-i18n="whatIsTitle">물타기(Dollar Cost Averaging)란?</h3>
                <p data-i18n="whatIsDesc">
                    주가가 하락했을 때 추가 매수를 통해 평균 단가를 낮추는 투자 전략입니다. 
                    이를 통해 향후 주가가 반등할 때 손실을 더 빠르게 만회하고, 수익 전환 시점을 앞당길 수 있습니다. 
                    하지만 무분별한 물타기는 '깡통 계좌'의 지름길이 될 수 있으므로, 철저한 계산과 비중 관리가 선행되어야 합니다.
                </p>

                <h3 data-i18n="featureTitle">Stock Pro의 차별화된 기능</h3>
                <ul>
                    <li data-i18n="feat1"><strong>목표 평단 역계산:</strong> "내 평단을 $150까지 낮추려면 몇 주를 사야 할까?"라는 질문에 명확한 답을 제시합니다.</li>
                    <li data-i18n="feat2"><strong>이중 통화 지원:</strong> 미국 주식 투자 시 필수적인 실시간 환율을 반영하여, 원화(KRW) 기준의 정확한 투자 규모를 파악할 수 있습니다.</li>
                    <li data-i18n="feat3"><strong>시각적 리스크 분석:</strong> 현재 주가와 내 평단의 괴리율을 시각화된 차트로 제공하여 객관적인 상황 인식을 돕습니다.</li>
                </ul>

                <h3 data-i18n="adviceTitle">투자 조언 및 주의사항</h3>
                <p data-i18n="adviceDesc">
                    분할 매수는 하락장에서 강력한 무기가 될 수 있지만, 펀더멘털이 훼손된 기업에 대해서는 신중해야 합니다. 
                    추가 매수 전에 반드시 해당 기업의 실적, 재무 건전성, 그리고 시장의 모멘텀을 다시 한번 확인하시기 바랍니다. 
                    또한, 전체 포트폴리오에서 특정 종목의 비중이 과도하게 커지지 않도록 리스크 관리에 만전을 기하십시오.
                </p>
            </article>

            <div class="disclaimer-box">
                <h4 data-i18n="disclaimerTitle">⚠️ 면책 조항 (Disclaimer)</h4>
                <p data-i18n="disclaimerDesc">
                    본 서비스가 제공하는 계산 결과와 데이터는 투자 참고용이며, 그 정확성이나 완전성을 보장하지 않습니다. 
                    환율 변동, 증권사 수수료 정책, 시장 상황 등에 따라 실제 결과와 차이가 발생할 수 있습니다. 
                    모든 투자의 최종 책임은 투자자 본인에게 있으며, Stock Pro는 본 도구 사용으로 인한 어떠한 손실에 대해서도 책임을 지지 않습니다.
                </p>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2026 Stock Pro. Investment tools for professionals.</p>
        <div class="footer-links">
            <a href="privacy.html" data-i18n="privacyPolicy">개인정보처리방침</a>
        </div>
    </footer>

    <script src="js/dashboard.js"></script>
    <script src="js/calculator.js"></script>
</body>
</html>